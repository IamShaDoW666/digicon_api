(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{3425:(e,l,a)=>{"use strict";a.d(l,{b:()=>r});var s=a(6797),t=a(9134),n=a(5881),i=s.forwardRef((e,l)=>(0,n.jsx)(t.sG.label,{...e,ref:l,onMouseDown:l=>{var a;l.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,l),!l.defaultPrevented&&l.detail>1&&l.preventDefault())}}));i.displayName="Label";var r=i},4464:(e,l,a)=>{"use strict";a.d(l,{BatchDataTable:()=>F});var s=a(5881),t=a(6606),n=a(6055),i=a(9733),r=a(9806),d=a(6093),o=a(1783),c=a(6415),g=a(1160),x=a(5557),u=a(6827),h=a(4787),m=a(4588),f=a(6797),p=a(3582),j=a(4813),v=a(5926),w=a(7681),b=a(8369),N=a(5737);let C=(0,N.createServerReference)("7f001fd55c9d52f8952ded3dad3545a14db127e34c",N.callServer,void 0,N.findSourceMapURL,"deleteBatch");var S=a(9979),y=a(2087),R=a(8337),P=a(9238),M=a(1874),z=a(70),k=a.n(z),T=a(7403),A=a(3356);function I(e){let{row:l}=e,{transform:a,transition:t,setNodeRef:n,isDragging:d}=(0,i.gl)({id:l.original.id});return(0,s.jsx)(y.TableRow,{"data-state":l.getIsSelected()&&"selected","data-dragging":d,ref:n,className:"relative z-0 data-[dragging=true]:z-10 data-[dragging=true]:opacity-80",style:{transform:r.Ks.Transform.toString(a),transition:t},children:l.getVisibleCells().map(e=>(0,s.jsx)(y.TableCell,{children:(0,h.Kv)(e.column.columnDef.cell,e.getContext())},e.id))})}function B(e){var l;let{data:a}=e,[r,N]=f.useState(()=>a),[z,B]=f.useState(""),[F,E]=f.useState({}),[D,G]=f.useState({}),[V,_]=f.useState([]),[K,$]=f.useState([]),[H,O]=f.useState({pageIndex:0,pageSize:10}),L=f.useId(),U=(0,t.FR)((0,t.MS)(t.cA,{}),(0,t.MS)(t.IG,{}),(0,t.MS)(t.uN,{})),q=(0,T.useRouter)();async function J(e){if(confirm("Are you sure you want to delete this batch? This action cannot be undone."))try{(await C(e)).success?((0,A.oR)("Batch deleted successfully"),q.refresh()):(0,A.oR)("Error deleting Batch")}catch(e){console.error("Error deleting batch:",e),(0,A.oR)("Error deleting Batch")}}let Q=f.useMemo(()=>(null==r?void 0:r.map(e=>{let{id:l}=e;return l}))||[],[r]);f.useEffect(()=>{N(a.filter(e=>e.reference.toLowerCase().includes(z.toLowerCase())))},[z,a]);let W=[{id:"number",header:"#",cell:e=>{let{row:l}=e;return(0,s.jsx)(p.E,{variant:"outline",children:l.index+1})}},{accessorKey:"reference",header:"Reference",cell:e=>{let{row:l}=e;return(0,s.jsx)(k(),{href:"/admin/batches/".concat(l.original.id),children:l.original.reference})},enableHiding:!1},{accessorKey:"Media",header:"Media",cell:e=>{let{row:l}=e;return(0,s.jsx)(p.E,{variant:"outline",className:"text-muted-foreground px-1.5",children:l.original.media.length})}},{accessorKey:"Created At",header:"Created At",cell:e=>{let{row:l}=e,a=new Date(l.original.createdAt),t=a.toISOString().split("T")[0];return(0,s.jsx)(P.Bc,{children:(0,s.jsxs)(P.m_,{children:[(0,s.jsx)(P.k$,{children:t}),(0,s.jsx)(P.ZI,{children:(0,s.jsx)("p",{children:a.toLocaleTimeString()})})]})})}},{accessorKey:"Created By",header:"Created By",cell:e=>{let{row:l}=e;return l.original.createdBy.name}},{id:"actions",header:()=>"Actions",cell:e=>{let{row:l}=e;return(0,s.jsx)(j.$,{variant:"destructive",onClick:()=>J(l.original.id),children:(0,s.jsx)(M.A,{})})}}],Z=(0,h.N4)({data:r,columns:W,state:{sorting:K,columnVisibility:D,rowSelection:F,columnFilters:V,pagination:H},getRowId:e=>e.id.toString(),enableRowSelection:!0,onRowSelectionChange:E,onSortingChange:$,onColumnFiltersChange:_,onColumnVisibilityChange:G,onPaginationChange:O,getCoreRowModel:(0,m.HT)(),getFilteredRowModel:(0,m.hM)(),getPaginationRowModel:(0,m.kW)(),getSortedRowModel:(0,m.h5)(),getFacetedRowModel:(0,m.kQ)(),getFacetedUniqueValues:(0,m.oS)()});return(0,s.jsxs)(R.tU,{defaultValue:"outline",className:"w-full flex-col justify-start gap-6",children:[(0,s.jsx)(S.p,{className:"max-w-1/4 mx-6",value:z,placeholder:"Search by reference",onChange:e=>B(e.target.value)}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 lg:px-6",children:[(0,s.jsx)(w.J,{htmlFor:"view-selector",className:"sr-only",children:"View"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(v.rI,{children:[(0,s.jsx)(v.ty,{asChild:!0,children:(0,s.jsxs)(j.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(d.A,{}),(0,s.jsx)("span",{className:"hidden lg:inline",children:"Customize Columns"}),(0,s.jsx)("span",{className:"lg:hidden",children:"Columns"}),(0,s.jsx)(o.A,{})]})}),(0,s.jsx)(v.SQ,{align:"end",className:"w-56",children:Z.getAllColumns().filter(e=>void 0!==e.accessorFn&&e.getCanHide()).map(e=>(0,s.jsx)(v.hO,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:l=>e.toggleVisibility(!!l),children:e.id},e.id))})]})})]}),(0,s.jsxs)(R.av,{value:"outline",className:"relative flex flex-col gap-4 overflow-auto px-4 lg:px-6",children:[(0,s.jsx)("div",{className:"overflow-hidden rounded-lg border",children:(0,s.jsx)(t.Mp,{collisionDetection:t.fp,modifiers:[n.FN],onDragEnd:function(e){let{active:l,over:a}=e;l&&a&&l.id!==a.id&&N(e=>{let s=Q.indexOf(l.id),t=Q.indexOf(a.id);return(0,i.be)(e,s,t)})},sensors:U,id:L,children:(0,s.jsxs)(y.Table,{children:[(0,s.jsx)(y.TableHeader,{className:"bg-muted sticky top-0 z-10",children:Z.getHeaderGroups().map(e=>(0,s.jsx)(y.TableRow,{children:e.headers.map(e=>(0,s.jsx)(y.TableHead,{colSpan:e.colSpan,children:e.isPlaceholder?null:(0,h.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(y.TableBody,{className:"**:data-[slot=table-cell]:first:w-8",children:(null==(l=Z.getRowModel().rows)?void 0:l.length)?(0,s.jsx)(i.gB,{items:Q,strategy:i._G,children:Z.getRowModel().rows.map(e=>(0,s.jsx)(I,{row:e},e.id))}):(0,s.jsx)(y.TableRow,{children:(0,s.jsx)(y.TableCell,{colSpan:W.length,className:"h-24 text-center",children:"No results."})})})]})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,s.jsxs)("div",{className:"text-muted-foreground hidden flex-1 text-sm lg:flex",children:[Z.getFilteredSelectedRowModel().rows.length," of"," ",Z.getFilteredRowModel().rows.length," row(s) selected."]}),(0,s.jsxs)("div",{className:"flex w-full items-center gap-8 lg:w-fit",children:[(0,s.jsxs)("div",{className:"hidden items-center gap-2 lg:flex",children:[(0,s.jsx)(w.J,{htmlFor:"rows-per-page",className:"text-sm font-medium",children:"Rows per page"}),(0,s.jsxs)(b.l6,{value:"".concat(Z.getState().pagination.pageSize),onValueChange:e=>{Z.setPageSize(Number(e))},children:[(0,s.jsx)(b.bq,{size:"sm",className:"w-20",id:"rows-per-page",children:(0,s.jsx)(b.yv,{placeholder:Z.getState().pagination.pageSize})}),(0,s.jsx)(b.gC,{side:"top",children:[10,20,30,40,50].map(e=>(0,s.jsx)(b.eb,{value:"".concat(e),children:e},e))})]})]}),(0,s.jsxs)("div",{className:"flex w-fit items-center justify-center text-sm font-medium",children:["Page ",Z.getState().pagination.pageIndex+1," of"," ",Z.getPageCount()]}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2 lg:ml-0",children:[(0,s.jsxs)(j.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>Z.setPageIndex(0),disabled:!Z.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,s.jsx)(c.A,{})]}),(0,s.jsxs)(j.$,{variant:"outline",className:"size-8",size:"icon",onClick:()=>Z.previousPage(),disabled:!Z.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,s.jsx)(g.A,{})]}),(0,s.jsxs)(j.$,{variant:"outline",className:"size-8",size:"icon",onClick:()=>Z.nextPage(),disabled:!Z.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,s.jsx)(x.A,{})]}),(0,s.jsxs)(j.$,{variant:"outline",className:"hidden size-8 lg:flex",size:"icon",onClick:()=>Z.setPageIndex(Z.getPageCount()-1),disabled:!Z.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,s.jsx)(u.A,{})]})]})]})]})]}),(0,s.jsx)(R.av,{value:"past-performance",className:"flex flex-col px-4 lg:px-6",children:(0,s.jsx)("div",{className:"aspect-video w-full flex-1 rounded-lg border border-dashed"})}),(0,s.jsx)(R.av,{value:"key-personnel",className:"flex flex-col px-4 lg:px-6",children:(0,s.jsx)("div",{className:"aspect-video w-full flex-1 rounded-lg border border-dashed"})}),(0,s.jsx)(R.av,{value:"focus-documents",className:"flex flex-col px-4 lg:px-6",children:(0,s.jsx)("div",{className:"aspect-video w-full flex-1 rounded-lg border border-dashed"})})]})}function F(e){let{data:l}=e;return(0,s.jsx)("div",{children:(0,s.jsx)(B,{data:l})})}},6820:(e,l,a)=>{Promise.resolve().then(a.bind(a,4464)),Promise.resolve().then(a.bind(a,2442)),Promise.resolve().then(a.bind(a,355))}},e=>{var l=l=>e(e.s=l);e.O(0,[186,153,684,103,240,324,343,355,889,364,770,358],()=>l(6820)),_N_E=e.O()}]);